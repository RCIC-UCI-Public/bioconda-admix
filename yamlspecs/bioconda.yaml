!include rcic-package.yaml
---
- package: bioconda 
  basename: bioconda 
  name: "{{basename}}"
  versions: !include versions.yaml
  version: "{{versions.miniconda2}}"
  vendor_source: https://repo.anaconda.com/miniconda/Miniconda2-{{version}}-Linux-x86_64.sh
  src_tarball: Miniconda-{{version}}-Linux-x86_64.sh
  src_dir: .
  addfile:
    - condarc
    - filter-requires-{{name}}.sh
  description: |
    PacBio Secondary Analysis Tools on Bioconda from
    https://github.com/PacificBiosciences/pbbioconda
    Based on Miniconda2 {{version}} for Linux installer 64bit
    Uses python 2.7.
  packset1: bam2fastx bax2bam blasr pbgcpp genomicconsensus isoseq3 lima minorseq pbbam pbccs 
  packset2: pbcommand pbcopper pbcore pbcoretools pblaa pbalign pbmm2 pbsv recalladapters 
  build:
    configure: echo no configure required 
    pkgmake: >
      mkdir -p {{root}};
      bash {{src_tarball}} -b -u -p {{root}};
      $(INSTALL) condarc {{root}};
      (cd {{root}}; bin/conda install -c bioconda -y {{packset1}} {{packset2}});
      {{root}}/bin/conda clean -p -t -y
    target: 
  install:
    makeinstall: 
      cp -pR {{root}}/* $(ROOT)/{{root}}/
  rpm: !include rpm.extras.yaml

